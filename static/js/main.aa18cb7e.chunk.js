(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(3),c=a.n(r),s=(a(16),a(9)),l=a(4),i=a(5),u=a(7),d=a(6),h=a(1),m=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={searchQuery:""},e.handleInput=function(t){e.setState({searchQuery:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.searchQuery)},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(h.jsx)("header",{className:"Searchbar",children:Object(h.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(h.jsx)("span",{className:"Button-label",children:"Search"})}),Object(h.jsx)("input",{onChange:this.handleInput,value:this.state.searchQuery,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(o.a.Component),j=a(2),b=a.n(j),g=function(e){var t=e.onClickGalleryItem,a=e.src,n=e.srcOriginal,o=e.id,r=e.alt;return Object(h.jsx)("li",{className:"ImageGalleryItem",onClick:t,children:Object(h.jsx)("img",{src:a,alt:r,"data-id":o,"data-source":n,className:"ImageGalleryItem-image"})})},p=a(41),y=document.getElementById("modal-root"),f=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleKeydown=function(t){e.props.closeModalByKeydown(t)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){var e=this.props,t=e.srcImgModal,a=e.altImgModal,n=e.closeModalByClick;return Object(r.createPortal)(Object(h.jsx)("div",{className:"Overlay",onClick:n,children:Object(h.jsxs)("div",{className:"Modal",children:[Object(h.jsx)("img",{src:t,alt:a}),Object(h.jsx)("button",{type:"button",className:"ModalClose-button",onClick:n,children:Object(h.jsx)("span",{className:"Button-label",children:"Close"})})]})}),y)}}]),a}(o.a.Component),O=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={showModal:!1,srcImgModal:"",altImgModal:""},e.openModal=function(t){e.setState({showModal:!0,srcImgModal:t.target.dataset.source,altImgModal:t.target.alt})},e.closeModalByClick=function(t){t.target===t.currentTarget&&e.setState({showModal:!1,srcImgModal:"",altImgModal:""})},e.closeModalByKeydown=function(t){"Escape"===t.code&&e.setState({showModal:!1,srcImgModal:"",altImgModal:""})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.imageData,a=this.state,n=a.showModal,o=a.srcImgModal,r=a.altImgModal;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("ul",{className:"ImageGallery",children:t.map((function(t){return Object(h.jsx)(g,{onClickGalleryItem:e.openModal,src:t.webformatURL,srcOriginal:t.largeImageURL,id:t.id,alt:t.tags},Object(p.a)())}))}),n&&Object(h.jsx)(f,{srcImgModal:o,altImgModal:r,closeModalByClick:this.closeModalByClick,closeModalByKeydown:this.closeModalByKeydown})]})}}]),a}(o.a.Component);O.propsType={hits:b.a.array.isRequired};var v=O,M=function(e){var t=e.loadMore;return Object(h.jsx)("button",{type:"button",className:"Button","data-action":"load-more",onClick:t,children:"Load more"})},w=a(11),I=a.n(w),x=document.getElementById("loader-root"),S=function(){return Object(r.createPortal)(Object(h.jsx)(I.a,{className:"Loader",type:"ThreeDots",color:"#3f51b5",height:100,width:100,timeout:5e3}),x)},k=a(10);a(38);k.a.configure();var C=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={searchQuery:null,isLoading:!1,page:1,error:null,hits:[],totalHits:""},e.getImageData=function(){var t=e.state,a=t.searchQuery,n=t.page;e.setState({isLoading:!0}),fetch("https://pixabay.com/api/?key=".concat("19936431-665ecc9218a1e5c693259ad16","&q=").concat(a,"&page=").concat(n,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()})).then((function(t){e.setState((function(e){return{hits:[].concat(Object(s.a)(e.hits),Object(s.a)(t.hits)),page:e.page+1,totalHits:t.totalHits}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){e.setState({isLoading:!1}),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e.onSubmit=function(t){t?e.setState({searchQuery:t,hits:[],page:1}):k.a.warn("Please, enter any data")},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.searchQuery!==this.state.searchQuery&&this.getImageData()}},{key:"render",value:function(){var e=this.state,t=e.hits,a=e.isLoading,n=e.totalHits,o=e.page;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(m,{onSubmit:this.onSubmit}),Object(h.jsx)(v,{imageData:t}),t.length>0&&n/12+1>o&&Object(h.jsx)(M,{loadMore:this.getImageData}),a&&Object(h.jsx)(S,{})]})}}]),a}(n.Component);c.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(C,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.aa18cb7e.chunk.js.map